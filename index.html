<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>École de Piano en Ligne</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .header h1 {
            font-size: 3em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.2em;
            color: #666;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .tab-button:hover, .tab-button.active {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .lesson-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .lesson-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        .lesson-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }

        .lesson-card:hover::before {
            animation: shimmer 1.5s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .lesson-card h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .lesson-card .duration {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            display: inline-block;
            margin-top: 10px;
        }

        .admin-form {
            display: grid;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #667eea;
        }

        .form-group input, .form-group textarea, .form-group select {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .piano-keys {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            background: #222;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
        }

        .key {
            width: 40px;
            height: 200px;
            margin: 0 1px;
            cursor: pointer;
            border-radius: 0 0 5px 5px;
            transition: all 0.1s ease;
            position: relative;
        }

        .key.white {
            background: white;
            border: 1px solid #ccc;
        }

        .key.black {
            background: #222;
            width: 25px;
            height: 120px;
            margin: 0 -12px;
            z-index: 2;
            border-radius: 0 0 3px 3px;
        }

        .key.active {
            background: #667eea !important;
            transform: translateY(2px);
        }

        .progress-section {
            margin: 30px 0;
        }

        .progress-bar {
            background: #e1e5e9;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            background: linear-gradient(45deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 10px;
            transition: width 0.6s ease;
        }

        .student-list {
            display: grid;
            gap: 15px;
        }

        .student-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .student-card:hover {
            transform: translateX(10px);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #667eea;
        }

        .metronome {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            margin: 20px 0;
        }

        .bpm-display {
            font-size: 3em;
            font-weight: bold;
            color: #d35400;
            margin: 20px 0;
        }

        .bpm-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .bpm-btn {
            background: #d35400;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .bpm-btn:hover {
            background: #e67e22;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .piano-keys {
                transform: scale(0.8);
            }
            
            .lesson-grid {
                grid-template-columns: 1fr;
            }
        }

        .floating-notes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .note {
            position: absolute;
            font-size: 2em;
            opacity: 0.1;
            animation: floatNote 15s linear infinite;
        }

        @keyframes floatNote {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.1;
            }
            90% {
                opacity: 0.1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="floating-notes">
        <div class="note" style="left: 10%; animation-delay: 0s;">♪</div>
        <div class="note" style="left: 20%; animation-delay: 2s;">♫</div>
        <div class="note" style="left: 30%; animation-delay: 4s;">♪</div>
        <div class="note" style="left: 40%; animation-delay: 6s;">♬</div>
        <div class="note" style="left: 50%; animation-delay: 8s;">♪</div>
        <div class="note" style="left: 60%; animation-delay: 10s;">♫</div>
        <div class="note" style="left: 70%; animation-delay: 12s;">♪</div>
        <div class="note" style="left: 80%; animation-delay: 14s;">♬</div>
        <div class="note" style="left: 90%; animation-delay: 1s;">♪</div>
    </div>

    <div class="container">
        <div class="header">
            <h1>🎹 École de Piano Virtuose</h1>
            <p>Créez et partagez vos cours de piano de manière professionnelle</p>
        </div>

        <div class="nav-tabs">
            <button class="tab-button active" onclick="showTab('accueil')">🏠 Accueil</button>
            <button class="tab-button" onclick="showTab('cours')">📚 Cours</button>
            <button class="tab-button" onclick="showTab('piano')">🎹 Piano Virtuel</button>
            <button class="tab-button" onclick="showTab('progression')">📈 Progression</button>
            <button class="tab-button" onclick="showTab('admin')">⚙️ Administration</button>
        </div>

        <!-- Accueil -->
        <div class="tab-content active" id="accueil">
            <h2>Bienvenue dans votre école de piano en ligne</h2>
            <p>Cette plateforme vous permet de créer, organiser et dispenser vos cours de piano de manière interactive et engageante.</p>
            
            <div class="lesson-grid">
                <div class="lesson-card" onclick="showTab('cours')">
                    <h3>📖 Gestion des Cours</h3>
                    <p>Créez et organisez vos leçons avec du contenu riche et interactif.</p>
                    <div class="duration">Commencer</div>
                </div>
                <div class="lesson-card" onclick="showTab('piano')">
                    <h3>🎹 Piano Interactif</h3>
                    <p>Un piano virtuel pour les démonstrations et la pratique.</p>
                    <div class="duration">Jouer</div>
                </div>
                <div class="lesson-card" onclick="showTab('progression')">
                    <h3>📊 Suivi des Élèves</h3>
                    <p>Suivez les progrès et gérez vos étudiants efficacement.</p>
                    <div class="duration">Voir</div>
                </div>
            </div>
        </div>

        <!-- Cours -->
        <div class="tab-content" id="cours">
            <h2>📚 Bibliothèque de Cours</h2>
            <button class="btn" onclick="openModal('lesson-modal')">➕ Nouveau Cours</button>
            
            <div class="lesson-grid" id="lessons-container">
                <!-- Les cours seront ajoutés ici dynamiquement -->
            </div>
        </div>

        <!-- Piano Virtuel -->
        <div class="tab-content" id="piano">
            <h2>🎹 Piano Virtuel</h2>
            
            <div class="metronome">
                <h3>🎵 Métronome</h3>
                <div class="bpm-display" id="bpm-display">120</div>
                <div class="bpm-controls">
                    <button class="bpm-btn" onclick="adjustBPM(-10)">-10</button>
                    <button class="bpm-btn" onclick="adjustBPM(-1)">-1</button>
                    <button class="bpm-btn" id="metronome-btn" onclick="toggleMetronome()">▶️ Start</button>
                    <button class="bpm-btn" onclick="adjustBPM(1)">+1</button>
                    <button class="bpm-btn" onclick="adjustBPM(10)">+10</button>
                </div>
            </div>

            <div class="piano-keys" id="piano-keys">
                <!-- Les touches seront générées par JavaScript -->
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="recordMode()">🔴 Mode Enregistrement</button>
                <button class="btn" onclick="playRecording()">▶️ Rejouer</button>
                <button class="btn" onclick="clearRecording()">🗑️ Effacer</button>
            </div>
        </div>

        <!-- Progression -->
        <div class="tab-content" id="progression">
            <h2>📈 Suivi de la Progression</h2>
            <button class="btn" onclick="openModal('student-modal')">➕ Ajouter un Élève</button>
            
            <div class="student-list" id="students-container">
                <!-- Les élèves seront ajoutés ici -->
            </div>
        </div>

        <!-- Administration -->
        <div class="tab-content" id="admin">
            <h2>⚙️ Panneau d'Administration</h2>
            <div class="admin-form">
                <div class="form-group">
                    <label>Nom de l'école:</label>
                    <input type="text" id="school-name" placeholder="École de Piano Virtuose">
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="school-description" rows="3" placeholder="Description de votre école de piano..."></textarea>
                </div>
                <div class="form-group">
                    <label>Email de contact:</label>
                    <input type="email" id="contact-email" placeholder="contact@ecole-piano.com">
                </div>
                <button class="btn" onclick="saveSettings()">💾 Sauvegarder les Paramètres</button>
            </div>
        </div>
    </div>

    <!-- Modal pour nouveau cours -->
    <div class="modal" id="lesson-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('lesson-modal')">&times;</span>
            <h3>📖 Créer un Nouveau Cours</h3>
            <div class="admin-form">
                <div class="form-group">
                    <label>Titre du cours:</label>
                    <input type="text" id="lesson-title" placeholder="Ex: Les bases du piano">
                </div>
                <div class="form-group">
                    <label>Niveau:</label>
                    <select id="lesson-level">
                        <option value="debutant">Débutant</option>
                        <option value="intermediaire">Intermédiaire</option>
                        <option value="avance">Avancé</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Durée (minutes):</label>
                    <input type="number" id="lesson-duration" placeholder="30" min="5" max="180">
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="lesson-description" rows="4" placeholder="Description détaillée du cours..."></textarea>
                </div>
                <div class="form-group">
                    <label>Contenu du cours:</label>
                    <textarea id="lesson-content" rows="8" placeholder="Contenu détaillé de la leçon, exercices, théorie..."></textarea>
                </div>
                <button class="btn" onclick="addLesson()">➕ Créer le Cours</button>
            </div>
        </div>
    </div>

    <!-- Modal pour nouvel élève -->
    <div class="modal" id="student-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('student-modal')">&times;</span>
            <h3>👤 Ajouter un Nouvel Élève</h3>
            <div class="admin-form">
                <div class="form-group">
                    <label>Nom complet:</label>
                    <input type="text" id="student-name" placeholder="Ex: Marie Dupont">
                </div>
                <div class="form-group">
                    <label>Âge:</label>
                    <input type="number" id="student-age" placeholder="25" min="3" max="120">
                </div>
                <div class="form-group">
                    <label>Niveau:</label>
                    <select id="student-level">
                        <option value="debutant">Débutant</option>
                        <option value="intermediaire">Intermédiaire</option>
                        <option value="avance">Avancé</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="student-email" placeholder="marie.dupont@email.com">
                </div>
                <div class="form-group">
                    <label>Objectifs:</label>
                    <textarea id="student-goals" rows="3" placeholder="Objectifs de l'élève..."></textarea>
                </div>
                <button class="btn" onclick="addStudent()">➕ Ajouter l'Élève</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let lessons = [];
        let students = [];
        let currentBPM = 120;
        let metronomeInterval = null;
        let isRecording = false;
        let recording = [];
        let audioContext = null;

        // Navigation entre onglets
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Gestion des modales
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Génération du piano virtuel
        function createPiano() {
            const pianoKeys = document.getElementById('piano-keys');
            const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
            
            for (let octave = 4; octave <= 6; octave++) {
                notes.forEach(note => {
                    const key = document.createElement('div');
                    key.className = `key ${note.includes('#') ? 'black' : 'white'}`;
                    key.dataset.note = note + octave;
                    key.onclick = () => playNote(note + octave, key);
                    pianoKeys.appendChild(key);
                });
            }
        }

        // Jouer une note
        function playNote(note, keyElement) {
            if (audioContext === null) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }

            const frequencies = {
                'C4': 261.63, 'C#4': 277.18, 'D4': 293.66, 'D#4': 311.13, 'E4': 329.63, 'F4': 349.23,
                'F#4': 369.99, 'G4': 392.00, 'G#4': 415.30, 'A4': 440.00, 'A#4': 466.16, 'B4': 493.88,
                'C5': 523.25, 'C#5': 554.37, 'D5': 587.33, 'D#5': 622.25, 'E5': 659.25, 'F5': 698.46,
                'F#5': 739.99, 'G5': 783.99, 'G#5': 830.61, 'A5': 880.00, 'A#5': 932.33, 'B5': 987.77,
                'C6': 1046.50, 'C#6': 1108.73, 'D6': 1174.66, 'D#6': 1244.51, 'E6': 1318.51, 'F6': 1396.91,
                'F#6': 1479.98, 'G6': 1567.98, 'G#6': 1661.22, 'A6': 1760.00, 'A#6': 1864.66, 'B6': 1975.53
            };

            const frequency = frequencies[note];
            if (frequency) {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1);

                keyElement.classList.add('active');
                setTimeout(() => keyElement.classList.remove('active'), 200);

                if (isRecording) {
                    recording.push({ note, time: Date.now() });
                }
            }
        }

        // Gestion du métronome
        function adjustBPM(change) {
            currentBPM = Math.max(40, Math.min(200, currentBPM + change));
            document.getElementById('bpm-display').textContent = currentBPM;
            
            if (metronomeInterval) {
                clearInterval(metronomeInterval);
                startMetronome();
            }
        }

        function toggleMetronome() {
            const btn = document.getElementById('metronome-btn');
            
            if (metronomeInterval) {
                clearInterval(metronomeInterval);
                metronomeInterval = null;
                btn.textContent = '▶️ Start';
            } else {
                startMetronome();
                btn.textContent = '⏸️ Stop';
            }
        }

        function startMetronome() {
            const interval = (60 / currentBPM) * 1000;
            metronomeInterval = setInterval(() => {
                if (audioContext) {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.type = 'square';
                    
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                }
            }, interval);
        }

        // Gestion de l'enregistrement
        function recordMode() {
            isRecording = !isRecording;
            const btn = event.target;
            
            if (isRecording) {
                recording = [];
                btn.textContent = '⏹️ Arrêter';
                btn.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
            } else {
                btn.textContent = '🔴 Mode Enregistrement';
                btn.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
            }
        }

        function playRecording() {
            if (recording.length === 0) return;
            
            const startTime = recording[0].time;
            recording.forEach((entry, index) => {
                const delay = entry.time - startTime;
                setTimeout(() => {
                    const keyElement = document.querySelector(`[data-note="${entry.note}"]`);
                    if (keyElement) {
                        playNote(entry.note, keyElement);
                    }
                }, delay / 4); // Accélérer la lecture
            });
        }

        function clearRecording() {
            recording = [];
            alert('Enregistrement effacé');
        }

        // Gestion des cours
        function addLesson() {
            const title = document.getElementById('lesson-title').value;
            const level = document.getElementById('lesson-level').value;
            const duration = document.getElementById('lesson-duration').value;
            const description = document.getElementById('lesson-description').value;
            const content = document.getElementById('lesson-content').value;
            
            if (!title || !duration || !description) {
                alert('Veuillez remplir tous les champs obligatoires');
                return;
            }

            const lesson = {
                id: Date.now(),
                title,
                level,
                duration: parseInt(duration),
                description,
                content,
                createdAt: new Date().toLocaleDateString('fr-FR')
            };

            lessons.push(lesson);
            displayLessons();
            closeModal('lesson-modal');
            
            // Réinitialiser le formulaire
            document.getElementById('lesson-title').value = '';
            document.getElementById('lesson-duration').value = '';
            document.getElementById('lesson-description').value = '';
            document.getElementById('lesson-content').value = '';
            
            alert('Cours créé avec succès!');
        }

        function displayLessons() {
            const container = document.getElementById('lessons-container');
            container.innerHTML = '';

            lessons.forEach(lesson => {
                const levelColors = {
                    'debutant': 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
                    'intermediaire': 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                    'avance': 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
                };

                const lessonCard = document.createElement('div');
                lessonCard.className = 'lesson-card';
                lessonCard.style.background = levelColors[lesson.level];
                lessonCard.onclick = () => viewLesson(lesson);
                
                lessonCard.innerHTML = `
                    <h3>${lesson.title}</h3>
                    <p>${lesson.description}</p>
                    <div class="duration">${lesson.duration} min • ${lesson.level}</div>
                    <small>Créé le ${lesson.createdAt}</small>
                `;
                
                container.appendChild(lessonCard);
            });

            if (lessons.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; font-style: italic;">Aucun cours créé. Cliquez sur "Nouveau Cours" pour commencer.</p>';
            }
        }

        function viewLesson(lesson) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.closest('.modal').remove()">&times;</span>
                    <h2>${lesson.title}</h2>
                    <div style="margin: 20px 0;">
                        <span style="background: #667eea; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em;">
                            ${lesson.level} • ${lesson.duration} min
                        </span>
                    </div>
                    <h3>Description:</h3>
                    <p style="margin-bottom: 20px;">${lesson.description}</p>
                    <h3>Contenu du cours:</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; white-space: pre-wrap;">${lesson.content}</div>
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn" onclick="editLesson(${lesson.id})">✏️ Modifier</button>
                        <button class="btn" style="background: linear-gradient(45deg, #e74c3c, #c0392b);" onclick="deleteLesson(${lesson.id})">🗑️ Supprimer</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function editLesson(lessonId) {
            const lesson = lessons.find(l => l.id === lessonId);
            if (!lesson) return;

            document.getElementById('lesson-title').value = lesson.title;
            document.getElementById('lesson-level').value = lesson.level;
            document.getElementById('lesson-duration').value = lesson.duration;
            document.getElementById('lesson-description').value = lesson.description;
            document.getElementById('lesson-content').value = lesson.content;

            // Supprimer l'ancien cours
            lessons = lessons.filter(l => l.id !== lessonId);
            
            // Fermer la modal de visualisation
            document.querySelectorAll('.modal').forEach(modal => modal.remove());
            
            // Ouvrir la modal d'édition
            openModal('lesson-modal');
        }

        function deleteLesson(lessonId) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce cours?')) {
                lessons = lessons.filter(l => l.id !== lessonId);
                displayLessons();
                document.querySelectorAll('.modal').forEach(modal => modal.remove());
                alert('Cours supprimé avec succès!');
            }
        }

        // Gestion des étudiants
        function addStudent() {
            const name = document.getElementById('student-name').value;
            const age = document.getElementById('student-age').value;
            const level = document.getElementById('student-level').value;
            const email = document.getElementById('student-email').value;
            const goals = document.getElementById('student-goals').value;
            
            if (!name || !age || !email) {
                alert('Veuillez remplir tous les champs obligatoires');
                return;
            }

            const student = {
                id: Date.now(),
                name,
                age: parseInt(age),
                level,
                email,
                goals,
                progress: Math.floor(Math.random() * 100), // Progression simulée
                joinDate: new Date().toLocaleDateString('fr-FR'),
                lessonsCompleted: Math.floor(Math.random() * 20)
            };

            students.push(student);
            displayStudents();
            closeModal('student-modal');
            
            // Réinitialiser le formulaire
            document.getElementById('student-name').value = '';
            document.getElementById('student-age').value = '';
            document.getElementById('student-email').value = '';
            document.getElementById('student-goals').value = '';
            
            alert('Élève ajouté avec succès!');
        }

        function displayStudents() {
            const container = document.getElementById('students-container');
            container.innerHTML = '';

            students.forEach(student => {
                const studentCard = document.createElement('div');
                studentCard.className = 'student-card';
                studentCard.onclick = () => viewStudent(student);
                
                studentCard.innerHTML = `
                    <div>
                        <h3>${student.name}</h3>
                        <p>${student.age} ans • ${student.level}</p>
                        <small>${student.lessonsCompleted} cours terminés</small>
                    </div>
                    <div style="text-align: right;">
                        <div class="progress-section">
                            <div class="progress-bar" style="width: 120px;">
                                <div class="progress-fill" style="width: ${student.progress}%"></div>
                            </div>
                            <small>${student.progress}% complété</small>
                        </div>
                    </div>
                `;
                
                container.appendChild(studentCard);
            });

            if (students.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; font-style: italic;">Aucun élève enregistré. Cliquez sur "Ajouter un Élève" pour commencer.</p>';
            }
        }

        function viewStudent(student) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.closest('.modal').remove()">&times;</span>
                    <h2>👤 ${student.name}</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div>
                            <strong>Âge:</strong> ${student.age} ans<br>
                            <strong>Niveau:</strong> ${student.level}<br>
                            <strong>Email:</strong> ${student.email}<br>
                            <strong>Inscription:</strong> ${student.joinDate}
                        </div>
                        <div>
                            <strong>Progression globale:</strong>
                            <div class="progress-bar" style="margin: 10px 0;">
                                <div class="progress-fill" style="width: ${student.progress}%"></div>
                            </div>
                            ${student.progress}%<br>
                            <strong>Cours terminés:</strong> ${student.lessonsCompleted}
                        </div>
                    </div>
                    <h3>Objectifs:</h3>
                    <p style="background: #f8f9fa; padding: 15px; border-radius: 10px;">${student.goals || 'Aucun objectif spécifié'}</p>
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn" onclick="editStudent(${student.id})">✏️ Modifier</button>
                        <button class="btn" style="background: linear-gradient(45deg, #e74c3c, #c0392b);" onclick="deleteStudent(${student.id})">🗑️ Supprimer</button>
                        <button class="btn" onclick="updateProgress(${student.id})">📈 Mettre à jour progression</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function editStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;

            document.getElementById('student-name').value = student.name;
            document.getElementById('student-age').value = student.age;
            document.getElementById('student-level').value = student.level;
            document.getElementById('student-email').value = student.email;
            document.getElementById('student-goals').value = student.goals;

            // Supprimer l'ancien étudiant
            students = students.filter(s => s.id !== studentId);
            
            // Fermer la modal de visualisation
            document.querySelectorAll('.modal').forEach(modal => modal.remove());
            
            // Ouvrir la modal d'édition
            openModal('student-modal');
        }

        function deleteStudent(studentId) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cet élève?')) {
                students = students.filter(s => s.id !== studentId);
                displayStudents();
                document.querySelectorAll('.modal').forEach(modal => modal.remove());
                alert('Élève supprimé avec succès!');
            }
        }

        function updateProgress(studentId) {
            const newProgress = prompt('Nouvelle progression (0-100):');
            if (newProgress !== null && !isNaN(newProgress)) {
                const student = students.find(s => s.id === studentId);
                if (student) {
                    student.progress = Math.max(0, Math.min(100, parseInt(newProgress)));
                    displayStudents();
                    document.querySelectorAll('.modal').forEach(modal => modal.remove());
                    alert('Progression mise à jour!');
                }
            }
        }

        // Paramètres de l'école
        function saveSettings() {
            const schoolName = document.getElementById('school-name').value;
            const schoolDescription = document.getElementById('school-description').value;
            const contactEmail = document.getElementById('contact-email').value;

            if (schoolName) {
                document.querySelector('.header h1').innerHTML = `🎹 ${schoolName}`;
            }
            if (schoolDescription) {
                document.querySelector('.header p').textContent = schoolDescription;
            }

            alert('Paramètres sauvegardés avec succès!');
        }

        // Initialisation
        function init() {
            createPiano();
            
            // Données d'exemple
            lessons.push({
                id: 1,
                title: "Introduction au Piano",
                level: "debutant",
                duration: 45,
                description: "Découvrez les bases du piano : posture, position des mains, et premières notes.",
                content: "1. Posture correcte au piano\n2. Position des mains et des doigts\n3. Les touches blanches et noires\n4. Exercice : jouer Do-Ré-Mi\n5. Première mélodie simple",
                createdAt: new Date().toLocaleDateString('fr-FR')
            });
            lessons.push({
    id: 2,
    title: "Les gammes majeures",
    level: "debutant",
    duration: 40,
    description: "Maîtrisez les gammes de Do, Sol et Fa majeur avec les bons doigtés.",
    content: "1. Théorie des gammes majeures\n2. Gamme de Do majeur (mains séparées puis ensemble)\n3. Gamme de Sol majeur (1 dièse)\n4. Gamme de Fa majeur (1 bémol)\n5. Exercices de doigtés\n6. Tempo progressif avec métronome",
    createdAt: new Date().toLocaleDateString('fr-FR')
});

lessons.push({
    id: 3,
    title: "Premiers accords",
    level: "debutant",
    duration: 35,
    description: "Découvrez les accords de base : Do majeur, Fa majeur et Sol majeur.",
    content: "1. Qu'est-ce qu'un accord ?\n2. Construction d'un accord majeur\n3. Accord de Do majeur (Do-Mi-Sol)\n4. Accord de Fa majeur (Fa-La-Do)\n5. Accord de Sol majeur (Sol-Si-Ré)\n6. Progression simple : Do-Fa-Sol-Do\n7. Exercice : accompagnement de 'Frère Jacques'",
    createdAt: new Date().toLocaleDateString('fr-FR')
});

lessons.push({
    id: 4,
    title: "Rythme et mesure",
    level: "intermediaire",
    duration: 45,
    description: "Comprendre les bases du rythme, les temps et les mesures.",
    content: "1. La mesure 4/4\n2. Les valeurs de notes (noire, blanche, ronde)\n3. Compter les temps\n4. Exercices de rythme avec battement\n5. Utilisation du métronome\n6. Morceau simple en rythme : 'Mary Had a Little Lamb'\n7. Introduction aux silences",
    createdAt: new Date().toLocaleDateString('fr-FR')
});

lessons.push({
    id: 5,
    title: "Lecture de partitions",
    level: "intermediaire",
    duration: 50,
    description: "Apprendre à lire les notes sur la portée et jouer ses premières partitions.",
    content: "1. La portée et les clés\n2. Position des notes sur les lignes et interlignes\n3. Clé de Sol : notes de la main droite\n4. Clé de Fa : notes de la main gauche\n5. Exercices de lecture de notes\n6. Première partition simple : 'Ode to Joy' (Beethoven)\n7. Conseils pour mémoriser les notes",
    createdAt: new Date().toLocaleDateString('fr-FR')
});

            students.push({
                id: 1,
                name: "Sophie Martin",
                age: 28,
                level: "debutant",
                email: "sophie.martin@email.com",
                goals: "Apprendre à jouer mes chansons préférées",
                progress: 35,
                joinDate: new Date().toLocaleDateString('fr-FR'),
                lessonsCompleted: 8
            });

            displayLessons();
            displayStudents();
        }

        // Gestion des clics en dehors des modales
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Initialiser l'application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
